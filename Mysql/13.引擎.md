引擎


[注意：通过更改 STORAGE_ENGINE 配置变量，能够方便地更改MySQL服务器的默认存储引擎]

### 分类
- MyISAM: 默认的MySQL插件式存储引擎，它是在Web、数据仓储和其他应用环境下最常使用的存储引擎之一。
          [不支持事务、不具备AICD特性(原子性、一致性、分离性、永久性)，不支持外键约束、]
          只支持全文检索，是MySQL5.5.5版本之前的默认存储引擎。

- InnoDB: 用于事务处理应用程序，具有众多特性，包括ACID事务支持。(提供行级锁)

- BDB: 可替代InnoDB的事务引擎，支持COMMIT、ROLLBACK和其他事务特性。

- Memory: 将所有数据保存在RAM中，在需要快速查找引用和其他类似数据的环境下，可提供极快的访问。

- Merge: 允许MySQL DBA或开发人员将一系列等同的MyISAM表以逻辑方式组合在一起，并作为1个对象引用它们。对于诸如数据仓储等VLDB环境十分适合。

- Archive: 为大量很少引用的历史、归档、或安全审计信息的存储和检索提供了完美的解决方案。

- Federated: 能够将多个分离的MySQL服务器链接起来，从多个物理服务器创建一个逻辑数据库。十分适合于分布式环境或数据集市环境。

- Cluster/NDB: MySQL的簇式数据库引擎，尤其适合于具有高性能查找要求的应用程序，这类查找需求还要求具有最高的正常工作时间和可用性。

- Other: 其他存储引擎包括CSV（引用由逗号隔开的用作数据库表的文件），Blackhole（用于临时禁止对数据库的应用程序输入），以及Example引擎（可为快速创建定制的插件式存储引擎提供帮助）。

[一般来说不使用事务的话，请使用MyISAM引擎，使用事务的话，一般使用InnoDB]


### 对比
主要是 MyISAM和InnoDB 两个引擎，主要的区别如下 ：
1、innodb 支持事务，这一点非常重要，事务是一种高级的处理方式，如果在一些增删中如果那个出错可以换源回滚，myisam不支持事务。 
2、myisam适合查询以及插入为主的应用，Innodb适合频繁的修改以及设计到安全性能较高的应用。
3、innodb适合外键，mysiam不适合外键。
4、innodb不支持富文本 
5、InnoDB 中不保存表的行数，如 select count(*) from table 时，InnoDB；需要扫描一遍整个表来计算有多少行，
   但是 MyISAM 只要简单的读出保存好的行数即可。
   注意的是，当 count(*)语句包含 where 条件时 MyISAM 也需要扫描整个表； 

6、对于自增长的字段，InnoDB 中必须包含只有该字段的索引，但是在 MyISAM 表中可以和其他字段一起建立联合索引； 
7、清空整个表时，InnoDB 是一行一行的删除，效率非常慢。MyISAM 则会重建表； 
8、InnoDB 支持行锁（某些情况下还是锁整表，如 update table set a=1 where user like ‘%lee%’）



### 总结
InnoDB 支持行锁，事务，外键	MyISAM均不支持
![引擎对比](./image/引擎对比.tiff)


### MyISAM
MyISAM 管理非事务表、是ISAM 的扩展格式。除了提供ISAM里所没有的索引的字段管理等的大量功能、MyISAM 还使用一种表格锁定的机制、来优化多个并发的读写操作。
MyISAM 提供高速存储和检索、以及全文搜索能力；
在MYSQL5.5.5版本及以下的所有MYSQL配置里被支持。也是默认的存储引擎。

特性：
1:不支持事务、不具备AICD特性(原子性、一致性、分离性、永久性);
2:表级别锁定形式(更新数据时锁定整个表、这样虽然可以让锁定的实现成本很小但是同时大大降低了其并发的性能)；
3:读写相互阻塞(不仅会在写入的时候阻塞读取、还会在读取的时候阻塞写入、但是读取不会阻塞读取);
4:只会缓存索引(myisam通过key_buffer_size来设置缓存索引，提高访问性能较少磁盘IO的压力、但是只缓存索引、不缓存数据);
5:读取速度快、占用资源比较少;
6:不支持外键约束、只支持全文检索；
7:是MySQL5.5.5版本之前的默认存储引擎；

应用场景：
1:不需要事务支持的场景;
2:读多或者写多的单一业务场景、读写频繁的则不适合、会阻塞；
3:读写并发访问较低的业务；
4:数据修改相对较少的业务；
5:以读为主的业务(如博客、图片信息数据库、用户数据库等);
6:对数据的一致性要求不是很高的业务；
7:服务器硬件资源相对比较差的机器；



### InnoDB
[InnoDB的存储文件有两个，后缀名分别是 .frm和 .idb；其中 .frm是表的定义文件， .idb是表的数据文件]

1.InnoDB是事务型数据库的首选引擎，支持事务安全表（ACID）。

2.InnoDB是mySQL默认的存储引擎，默认的隔离级别是Repeatable read（可重复读），并且在RR的隔离级别下更近一步，
通过多版本并发控制（MVCC）解决不可重复读问题，加上间隙锁（也就是并发控制）解决幻读问题。
因此InnoDB的RR隔离级别其实：实现了串行化级别的效果，而保留了比较好的并发性能。

3.InnoDB支持行级锁。[行级锁可以最大程度的支持并发]，行级锁是由存储引擎层实现的。

[锁：锁的主要作用是管理共享资源的并发访问，用于实现事务的隔离性]

类型：共享锁（读锁）、排它锁（写锁)         
	MySQL锁的力度：
	    表级锁（开销小、并发性低），通常在服务器层实现
	    行级锁（开销大、并发性高），只会在存储引擎层面进行实现

4、InnoDB是为处理巨大数据量的最大性能设计。它的CPU效率可能是任何基于磁盘的关系型数据库引擎所不能匹敌的

5、InnoDB存储引擎完全与MySQL服务器整合，InnoDB存储引擎为在主内存中缓存数据和索引而维持它自己的缓冲池。
     InnoDB将它的表和索引在一个逻辑表空间中，表空间可以包含数个文件（或原始磁盘文件）。

6、InnoDB支持外键完整性约束，存储表中的数据时，每张表的存储都按照主键顺序存放，如果没有显示在表定义时指定主键。InnoDB会为每一行生成一个6字节的ROWID,并以此作为主键。

7、InnoDB被用在众多需要高性能的大型数据库站点上。

8、InnoDB中不保存表的行数（eg:select count(*)from table时，InnoDB需要扫描一遍整个表来计算有多少行）；清空整个表时，InnoDB是一行一行的删除，效率非常慢。

9、InnoDB不创建目录，使用InnoDB时，MySQL将在MySQL数据目录下创建一个名为ibdata1的10MB大小的自动扩展数据文件，以及两个名为ib_logfile0和ib_logfile1的5MB大小的日志文件。